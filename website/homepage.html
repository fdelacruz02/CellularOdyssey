<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cellular Odyssey</title>
    <link rel="stylesheet" href="homepageCSS.css">
</head>
<body>
    <section id='maincont'>
        <section id="gamecont">
            <section id="screeng">
                <canvas id="canvas3d"></canvas>
            </section>
        </section>
        <section id="displaycont">
            <p id="output" ></p>
            <section id="teacher">
                <script type="module" src="https://unpkg.com/@splinetool/viewer@1.9.37/build/spline-viewer.js"></script>
                <spline-viewer id="teacher" url="https://prod.spline.design/TWZ5Axx9RGjpXRmY/scene.splinecode"></spline-viewer>
            </section>
            <div id="input-container">
                <textarea id="text-input" rows="4" placeholder="Type here..."></textarea>
                <button id="submit-button" onclick="checkMultipleIncludes()">Submit</button>
            </div>
        </section>
    </section>
    
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <script type="module">
    import { Application } from 'https://unpkg.com/@splinetool/runtime@1.9.12/build/runtime.js';

    const canvas = document.getElementById('canvas3d');
    const spline = new Application(canvas);

    // Function to get the value of the 'firstname' parameter from the URL
    function getFirstnameFromURL() {
        const queryParams = new URLSearchParams(window.location.search);
        return queryParams.get('username') || 'error'; 
    }
    //Function to get the value of the 'age' parameter from the URL
    function getAgeFromURL() {
        const queryParams = new URLSearchParams(window.location.search);
        return queryParams.get('age') || 'error'; 
    }
    //Function to get the value of the 'score' parameter from the URL
    function getScoreFromURL() {
        const queryParams = new URLSearchParams(window.location.search);
        return queryParams.get('score') || 'error'; 
    }

    // Load the Spline scene and then set the variable based on the URL parameter
    spline.load('https://prod.spline.design/69aNqsaMkYjreWOh/scene.splinecode')
        .then(() => {
        const firstnameValue = getFirstnameFromURL();
        const age = getAgeFromURL();
        const score = getScoreFromURL();
        spline.setVariable('username', firstnameValue);
        spline.setVariable('age', age);
        spline.setVariable('score', score);
        });
    </script>
    <script src="display.js"></script>
    <script src="chatbot.js"></script>
</body>
</html>